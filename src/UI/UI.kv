MDBoxLayout:
    orientation: "vertical"

    
    MDLabel:
        font_size: "64sp"
        text: "Quantum Tic Tac Toe"
        halign: 'center'
        size_hint_y: .3


    ScreenManager:
        id: manager
        size_hint_y: .7

        MDScreen:
            name: "menu"

            MDBoxLayout:
                orientation: "vertical"
                spacing: 35
                padding: 20

                MDRaisedButton:
                    text: "Start"
                    font_size: "45sp"
                    size_hint: (.4, .25)
                    pos_hint: {'center_x': .5, 'center_y': .7}
                    on_release: app.start()

                MDRaisedButton:
                    text: "Rules"
                    font_size: "45sp"
                    size_hint: (.4, .25)
                    pos_hint: {'center_x': .5, 'center_y': .7}
                    on_release: manager.current = "rules"

                MDRaisedButton:
                    text: "Quit"
                    font_size: "45sp"
                    size_hint: (.4, .25)
                    pos_hint: {'center_x': .5, 'center_y': .7}
                    on_release: exit()

                MDBoxLayout: 
                    orientation: "horizontal"
                    size_hint: (.4, .25)
                    pos_hint: {'center_x': .5, 'center_y': .7}

                    CheckBox:
                        id: checkbox
                        size_hint_x: .2
                        on_active: app.checkbox_click(self, self.active)

                    MDLabel:
                        font_size: "12sp"
                        text: "Clasical tic tac toe vs Quantum computer"
                        halign: "center"
                        size_hint_x: .8


        MDScreen:
            name: "game"

            MDBoxLayout:
                orientation: "horizontal"
                padding: 120, 80

                MDGridLayout:
                    id: grid
                    size_hint: .7, .7
                    pos_hint: {'center_x': .9, 'center_y': .7}
                    cols: 3
                    rows: 3

                    MDRectangleFlatButton:
                        id: btn1
                        text: "1"
                        font_size: "45sp"
                        on_release: app.excecute(btn1, 0, 0)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)
                        
                    MDRectangleFlatButton:
                        id: btn2
                        text: "2"
                        font_size: "45sp"
                        on_release: app.excecute(btn2, 1, 0)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)

                    MDRectangleFlatButton:
                        id: btn3
                        text: "3"
                        font_size: "45sp"
                        on_release: app.excecute(btn3, 2, 0)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)

                    MDRectangleFlatButton:
                        id: btn4
                        text: "4"
                        font_size: "45sp"
                        on_release: app.excecute(btn4, 0, 1)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)

                    MDRectangleFlatButton:
                        id: btn5
                        text: "5"
                        font_size: "45sp"
                        on_release: app.excecute(btn5, 1, 1)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)

                    MDRectangleFlatButton:
                        id: btn6
                        text: "6"
                        font_size: "45sp"
                        on_release: app.excecute(btn6, 2, 1)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)

                    MDRectangleFlatButton:
                        id: btn7
                        text: "7"
                        font_size: "45sp"
                        on_release: app.excecute(btn7, 0, 2)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)

                    MDRectangleFlatButton:
                        id: btn8
                        text: "8"
                        font_size: "45sp"
                        on_release: app.excecute(btn8, 1, 2)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)

                    MDRectangleFlatButton:
                        id: btn9
                        text: "9"
                        font_size: "45sp"
                        on_release: app.excecute(btn9, 2, 2)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)


                MDBoxLayout:
                    orientation: "vertical"
                    spacing: 20

                    MDLabel:
                        id: score
                        font_size: "32sp"
                        text: "X's turn"
                        halign: "center"

                    MDLabel:
                        font_size: "20sp"
                        text: ""
                        halign: "center"

                    MDLabel:
                        id: moves
                        font_size: "20sp"
                        text: "20 moves left"
                        halign: "center"

                    MDRaisedButton:
                        id: pulse
                        text: "Pulse"
                        pos_hint: {'center_x': .5, 'center_y': .7}
                        on_release: app.pulse()
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        disabled: True

                    MDRaisedButton:
                        id: swap
                        text: "Swap (2)"
                        pos_hint: {'center_x': .5, 'center_y': .7}
                        on_release: app.swap()
                        md_bg_color_disabled: (.2,.2,.2,.4)

                    MDRaisedButton:
                        id: entangle
                        text: "Entangle"
                        pos_hint: {'center_x': .5, 'center_y': .7}
                        on_release: app.entangle()
                        md_bg_color_disabled: (.2,.2,.2,.4)

                    MDRaisedButton:
                        id: collapse
                        text: "Collapse"
                        pos_hint: {'center_x': .5, 'center_y': .7}
                        on_release: app.collapse()
                        md_bg_color_disabled: (.2,.2,.2,.4)

                    MDRaisedButton:
                        id: restart
                        text: "Main menu"
                        pos_hint: {'center_x': .5, 'center_y': .7}
                        on_release: app.restart()

        MDScreen:
            name: "computer"

            MDBoxLayout:
                orientation: "vertical"
                padding: (0, 0, 0, 40)
                spacing: 20

                MDLabel:
                    id: computer_score
                    font_size: "26sp"
                    text: "Player vs Quantum computer"
                    halign: "center"
                    size_hint: 1, .15

                MDGridLayout:
                    id: computer_grid
                    size_hint: .7, .6
                    pos_hint: {'center_x': .67, 'center_y': .7}
                    cols: 3
                    rows: 3

                    MDRectangleFlatButton:
                        id: cbtn1
                        text: "1"
                        font_size: "45sp"
                        on_release: app.cexcecute(cbtn1, 0, 0)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)
                        
                    MDRectangleFlatButton:
                        id: cbtn2
                        text: "2"
                        font_size: "45sp"
                        on_release: app.cexcecute(cbtn2, 1, 0)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)

                    MDRectangleFlatButton:
                        id: cbtn3
                        text: "3"
                        font_size: "45sp"
                        on_release: app.cexcecute(cbtn3, 2, 0)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)

                    MDRectangleFlatButton:
                        id: cbtn4
                        text: "4"
                        font_size: "45sp"
                        on_release: app.cexcecute(cbtn4, 0, 1)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)

                    MDRectangleFlatButton:
                        id: cbtn5
                        text: "5"
                        font_size: "45sp"
                        on_release: app.cexcecute(cbtn5, 1, 1)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)

                    MDRectangleFlatButton:
                        id: cbtn6
                        text: "6"
                        font_size: "45sp"
                        on_release: app.cexcecute(cbtn6, 2, 1)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)

                    MDRectangleFlatButton:
                        id: cbtn7
                        text: "7"
                        font_size: "45sp"
                        on_release: app.cexcecute(cbtn7, 0, 2)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)

                    MDRectangleFlatButton:
                        id: cbtn8
                        text: "8"
                        font_size: "45sp"
                        on_release: app.cexcecute(cbtn8, 1, 2)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)

                    MDRectangleFlatButton:
                        id: cbtn9
                        text: "9"
                        font_size: "45sp"
                        on_release: app.cexcecute(cbtn9, 2, 2)
                        size_hint: None, None
                        width: dp(75) + (self.ids.lbl_txt.texture_size[0] - self.ids.lbl_txt.texture_size[0])
                        height: dp(75) + (self.ids.lbl_txt.texture_size[1] - self.ids.lbl_txt.texture_size[1])
                        md_bg_color_disabled: (.2,.2,.2,.4)
                        line_color_disabled: (1,1,1,1)


                MDRaisedButton:
                    id: restart
                    text: "Main menu"
                    pos_hint: {'center_x': .5, 'center_y': .7}
                    on_release: app.restart()

        MDScreen:
            name: "rules"
            MDBoxLayout: 
                orientation: "vertical"
                padding: (120, 0, 120, 40)

                MDLabel:
                    text: "Rules"
                    font_size: "38sp"
                    halign: "center"
                    size_hint_y: .05

                MDLabel:
                    text: '''The main option is to pulse a qubit, this will increase the chance that the qubit will collapse into your symbol. \n Then there is the option to swap two qubits, this action can however only be done twice per player \n There is also the option to entangle two qubits. Do note that applying a collapse on an entangled qubit will collapse both of them. \n Finally, after a total of 20 moves have been played, the whole board collapses and the game ends.'''
                    font_size: "18sp"
                    halign: "center"
                    size_hint_y: .6

                MDRaisedButton:
                    id: restart
                    text: "Back to main menu"
                    font_size: "20sp"
                    size_hint_y: .13
                    pos_hint: {"center_x": .5, "center_y": .15}
                    on_release: manager.current = "menu"




                        